<openerp>
   <data>

   <record model='ir.ui.view' id='branchinfo_form_log'>
      <field name='name'>Special Info</field>
      <field name='model'>branch.info</field>
      <field name="priority">200</field>
      <field name='arch' type='xml'>
          <form string='branchinfo' version="7.0">
              <field name='logs' nolabel="1" readonly="1" />
                <footer>
                    <button string="Back"
                        name="back_windows" context="{'ids':id}" type="object" class="oe_highlight"  />
                </footer>
        </form>
     </field>
    </record>

   <record model='ir.ui.view' id='branchinfo_form_line'>
      <field name='name'>Special Info</field>
      <field name='model'>branch.info.line</field>
      <field name='arch' type='xml'>
          <form string="Info" version="7.0"> 
                   <field name='name' readonly="1"/>
                   <field name='path' readonly="1"/>
                   <field name='revno' readonly="1"/>
                   <field name='revid' readonly="1"/>
                   <field name='parent' widget="url"/>
                   <field name='st' invisible="1"/>
            <button string="Why" icon="STOCK_DIALOG_ERROR"
                name="show_ch" context="{'ids':id}" 
                attrs="{'invisible':['|',('st','=',False),('revno','=',0)]}" 
                type="object"/> 
            <button string="Logs" icon="terp-stock_zoom"
                name="show_log" attrs="{'invisible':[('revno','=',0)]}" 
                context="{'ids':id}"  type="object"/> 
            </form>
     </field>
    </record>

   <record model='ir.ui.view' id='branchinfo_tree_line'>
      <field name='name'>Special Info</field>
      <field name='model'>branch.info.line</field>
      <field name='arch' type='xml'>
            <tree string="Info" colors="blue:st==True;green:st==False and revno>0;red:revno==0"  >
                   <field name='name' readonly="1"/>
                   <field name='path' readonly="1"/>
                   <field name='revno' readonly="1"/>
                   <field name='revid' readonly="1"/>
                   <field name='parent' widget="url"/>
                   <field name='st' invisible="1"/>
            <button string="Why" icon="STOCK_DIALOG_ERROR"
                name="show_ch" context="{'ids':id}" 
                attrs="{'invisible':['|',('st','=',False),('revno','=',0)]}" 
                type="object"/> 
            <button string="Logs" icon="terp-stock_zoom"
                name="show_log" attrs="{'invisible':[('revno','=',0)]}" 
                context="{'ids':id}"  type="object"/> 
            </tree>
     </field>
    </record>

   <record model='ir.ui.view' id='branchinfo_form'>
      <field name='name'>Branch Info</field>
      <field name='model'>branch.info</field>
      <field name='arch' type='xml'>
          <form string='Branch Info' version="7.0">
              <header>
                    <button string="Load Info" class="oe_highlight"
                        name="load" type="object"  
                        />
                    or
                    <button string="Cancel" type="special" name="cancel"
                    class="oe_link"/>
              </header>
              <group col="5">
                  <group col="2">
                       <field name='jose_way' invisible="1" attrs="{'invisible':[('load','=',False)]}"/>
                       <field name='load' invisible="1" />
                  </group>
                  <group col="5" colspan="5">
                      <field name='line_ids' readonly="1" nolabel="1" mode="kanban">
                       <kanban>
                           <field name='name'/>
                           <field name='id'/>
                           <field name='path'/>
                           <field name='revno'/>
                           <field name='revid'/>
                           <field name='parent'/>
                           <field name='st'/>
                           <templates>
                               <t t-name="kanban-box"> 
                                   <div 
                                class="oe_kanban_content oe_kanban_card oe_kanban_project oe_kanban_global_click  oe_branch_info" 
                                        style="position: relative">
                                   <h4><field name='name'/></h4>
                                   <div t-att-title="record.path.raw_value" ><span>Path.</span></div>
                                   <field name='revno'/>
                                   <div class="oe_kanban_footer_left">
                                   <a t-att-href="record.parent.raw_value" target="_NEW">
                                     <img src="/branch_info/static/src/img/lp.png"></img>
                                   </a>
                                    <button string="Why" icon="STOCK_DIALOG_ERROR"
                                        name="show_ch" context="{'ids':id}" 
                                        attrs="{'invisible':['|',('st','=',False),('revno','=',0)]}" 
                                        type="object"/> 
                                    <button string="Logs" icon="terp-stock_zoom"
                                        name="show_log" attrs="{'invisible':[('revno','=',0)]}" 
                                        context="{'ids':id}"  type="object"/> 
                                    </div>
                                    </div>
                               </t>
                           </templates>
                       </kanban>
                      </field>
                 </group>
             </group>
        </form>
     </field>
    </record>
     <record model='ir.actions.act_window' id='branchinfo_action'>
       <field name='name'>branch.info</field>
       <field name='res_model'>branch.info</field>
       <field name='view_type'>form</field>
       <field name='view_id' eval="ref('branchinfo_form')"/>
       <field name='view_mode'>form</field>
       <field name='target'>inline</field>
     </record>

    <menuitem name = 'Branch Info' 
              id='show_branch_info_wz' 
              sequence='1000' 
              action='branchinfo_action' />
  </data>
</openerp>
